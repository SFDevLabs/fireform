Fireform=function(t,e,i){that=this,0===window.location.href.indexOf("file")&&console.warn("WARNING: Please run Fireform on page served from a web server to garentee functionality."),this.error=function(t){console.error(t)};var a,o,n,r=i&&i.successClass?i.successClass:"submit-success",m=(i&&i.failedClass?i.failedClass:"submit-failed",i&&i.formValidationClass?i.formValidationClass:"form-validation-failed"),l=i&&i.inputValidationClass?i.inputValidationClass:"input-validation-failed",s=i&&i.simpleValidation?i.simpleValidation:!1;if(that.emailNotification=i&&i.emailNotification?i.emailNotification:void 0,that.emailConfirmationName=i&&i.emailConfirmationName?i.emailConfirmationName:void 0,that.emailConfirmationFrom=i&&i.emailConfirmationFrom?i.emailConfirmationFrom:void 0,that.emailConfirmationSubject=i&&i.emailConfirmationSubject?i.emailConfirmationSubject:void 0,that.emailConfirmationBodyHTML=i&&i.emailConfirmationBodyHTML?i.emailConfirmationBodyHTML:void 0,that.emailConfirmationBodyText=i&&i.emailConfirmationBodyText?i.emailConfirmationBodyText:void 0,that.user=void 0,"string"!=typeof t)a=t;else if(0===t.search(/^\./))a=document.getElementsByClassName(t.slice(1))[0],console.warn("We will default to the first form matching this class selector");else if(0===t.search(/^\#/))a=document.getElementById(t.slice(1));else if(!a)return void this.error('Please use a Class or Id Selector. This mean your string should begin with a "." or "#".  You man also pass in a Dom elment object');if(!a.tagName)return void this.error("No DOM object found!");if("FORM"!==a.tagName)return void this.error("DOM elments is not a <form>");if(!e||e.length==-0)return void this.error("No Fireform URL entered");this.formDOMObject=a,this.inputs=o=a.elements;for(var f=this.inputs.length-1;f>=0;f--){var u;if(u=o[f].getAttribute("type"),"submit"===u){n=o[f];break}}return n?(this.submitElement=n,this.submit=function(t){var i,n=!0;t&&t.preventDefault?t.preventDefault():event&&event.preventDefault&&event.preventDefault();var r={};r._time={},r._time.name="_time",r._time.type="_time",r._time.value=(new Date).toString();for(var f=that.inputs.length-1;f>=0;f--){var u,d;u=that.inputs[f].name?o[f].name:"input_"+String(f),d=o[f].type,value=o[f].value,("true"===o[f].getAttribute("email-confirmation")||that.emailConfirmationName===u)&&(that.emailConfirmation=value),"true"===o[f].getAttribute("email-confirmation-from")&&(that.emailConfirmationFrom=value),"true"===o[f].getAttribute("email-confirmation-from")&&(that.emailConfirmationFrom=value),"true"===o[f].getAttribute("email-confirmation-subject")&&(that.emailConfirmationSubject=value),"true"===o[f].getAttribute("email-confirmation-body-html")&&(that.emailConfirmationBodyHTML=value),"true"===o[f].getAttribute("email-confirmation-body-text")&&(that.emailConfirmationBodyText=value),"true"!==o[f].getAttribute("email-notification")||that.emailNotification||(that.emailNotification=value),"radio"===d&&o[f].checked===!0?(r[u]={},r[u].value=o[f].checked?value:"",r[u].type=o[f].type,r[u].name=o[f].name,i=o[f].checked||i?!0:!1):"submit"!==d&&"radio"!==d&&(r[u]={},r[u].value=value,r[u].type=o[f].type,r[u].name=o[f].name,r[u].checked=o[f].checked),"radio"===d&&!i&&s?o[f].className+=" "+l:"submit"!==d&&""===value&&s?(o[f].className+=" "+l,n=!1):s&&(o[f].className=o[f].className.replace(new RegExp(l,"g"),""))}return n&&i||!s?(that.submitForm(e,r),a.className=a.className.replace(new RegExp(m,"g"),"")):(a.className+=" "+m,that.error("Validation Failed. Classname "+m+" Added to inputs")),!1},this.getRepo=function(t){var e,i,a,e,o,n;return t.match("fireform.org/publicexample")||t.match("fireform/publicexample")?"https://fireform.firebaseio.com/example/formPosts.json":(i=t.split("://")[1].split("/list/"),a=i[0].split(".org")[0],e=i[1].split("/"),o=that.user=e[0],isNaN(Number(o))||(o=that.user="simplelogin:"+o),n=that.repo=e[1],"https://"+a+".firebaseio.com/users/"+o+"/lists/"+n+"/formPosts.json")},this.getEmailRepo=function(t){var e,i,a,e,o,n;return t.match("fireform.org/publicexample")?null:(i=t.split("://")[1].split("/list/"),a=i[0].split(".org")[0],e=i[1].split("/"),o=that.user=e[0],n=e[1],"https://"+a+".firebaseio.com/users/"+o+"/")},this.submitForm=function(t,e){var o=new XMLHttpRequest,n=this.getRepo(t);o.open("POST",n,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(JSON.stringify(e));var m={};m.form=e,payloadText="",payloadHTML="<table>";for(var l in m.form)payloadText+=" \r\n "+l+" : "+m.form[l].value,payloadHTML+=" <tr><td> "+l+" </td> <td>"+m.form[l].value+"</td> </tr>";if(payloadText+="</table>",m.fireBaseRepo=t,m.payloadText=payloadText,m.payloadHTML=payloadHTML,m.uid=that.user?that.user:void 0,m.fireFormRepo=that.repo,that.emailConfirmation){m.emailConfirmation=that.emailConfirmation?that.emailConfirmation:void 0,m.emailConfirmationFrom=that.emailConfirmationFrom?that.emailConfirmationFrom:"no-reply@"+window.location.host,m.emailConfirmationSubject=that.emailConfirmationSubject?that.emailConfirmationSubject:"Confirming your submition to"+window.location.host,m.emailConfirmationBodyText=that.emailConfirmationBodyText?that.emailConfirmationBodyText:"Thanks for you submition!",m.emailConfirmationBodyHTML=that.emailConfirmationBodyHTML?"<div></div>"+that.emailConfirmationBodyHTML:"<div></div><p>Thanks for your submition!<p>";var s="https://fireform.firebaseio.com/emailQConfirmation.json",f=new XMLHttpRequest;f.open("POST",s,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(JSON.stringify(m))}if(that.emailNotification){m.emailNotification=that.emailNotification?that.emailNotification:void 0;var u="https://fireform.firebaseio.com/emailQNotification.json",d=new XMLHttpRequest;d.open("POST",u,!0),d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(JSON.stringify(m))}o.onreadystatechange=function(){4==o.readyState&&(a.className+=" "+r,i&&i.disableInput||that.disableInput(that.submitElement),i&&i.callback&&i.callback(null,{url:n}))}},this.disableInput=function(t){var e=document.createAttribute("disabled");e.value="true",t.setAttributeNode(e)},n.onclick=this.submit,this):void this.error('Please add a submit button with a <input type="submit"> attr"')};